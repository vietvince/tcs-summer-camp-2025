---
title: "Stage 2: Plants"
sidebar_position: 3
toc_min_heading_level: 2
toc_max_heading_level: 3
---

# Stage 2: Plants

## Objective üßêüóø

We are going to make plants behave, well, like plants! We are also going to tackle the overall GameManager system in this script. This will be a big scripting day, lets do this. 

Also, when we are making the scripts, we need to make sure we are also putting these scripts in the corresponding plant objects in Unity! Scripts are just part of an object's component. 

## Writing the Scripts üñãÔ∏èüíª

### Create the UI
    
There are many ways you can design your UI, but you can use our setup if you like. 

- First, make a frame that will capture everything of this UI. 

- Insert a background as a Image object.

- Create another frame that will capture all the plant cards.

- Create the plant cards with an image component for the card background, the plant image, and text that will display its cost. 

- Again, there are many ways to design this, make it unique and to your liking. 

### Create the Grid
    
- First, for good organization, let us make a empty object called Grid and just leave it blank. It should only have the transform as its default component. 

- Now, we will need to create an image UI and make them into the shape of a rectangle.
    - Make sure it fits in the corresponding background slot.
    - You should have an approximate 44 white square grid.

- We now need to create a layer for the grids so it will appear above the background. 

- Now, let's make the grid's color barely see through, like glass.
    - This will make the plants look nicer when placed.

### Create the Tile Script

This will be the easiest script that has ever been scripted. 

- Make a new script called Tile.
    - Inside this object there should only be one boolean variable called hasPlant (or whatever name you want).

- **That's it.** Now add the script to each of the grids that you created above. 
    

### Create the PlantSlot Script

This will be the script to show the plants in the UI. Here is the pseudocode for it:

```csharp
public class PlantSlot : MonoBehaviour

Declare a public sprite for plantSprite

Declare a public GameObject for plantObject

Declare a public integer for price

Declare a public Image for icon

Declare a public TextMeshProUGUI for priceText

Define private method OnValidate
    If plantSprite exists
        Enable the icon
        Set the icon's sprite to plantSprite
        Set the priceText to the string value of price
    Else
        Disable the icon
```

After creating the script, go back and assign the values to the Unity object back in Unity. For the text font, you can pick whichever font you like!

Remember the code above is just a pseudocode version that represents the idea, you will have to implement it through correct syntax!

### GameManager Script

Now we will need a script that will control how the game will work, for example we need to plant a plant on a grid. 

Below will be the pseudocode for the GameManager:

```csharp
Define the GameManager Class:
This class inherits from Unity's MonoBehaviour, allowing it to function as a component in Unity.

Declare Variables:
currentPlant: Stores the currently selected plant GameObject.
currentPlantSprite: Stores the sprite of the currently selected plant.
tiles: Stores the parent transform of all tile objects.
tileMask: Used to identify tile objects in the scene.

BuyPlant Method:
This method is used to set the currently selected plant and its sprite. It takes two parameters: a plant GameObject and a sprite.

Update Method:
This method is called once per frame.

It performs a raycast from the camera to the mouse position to detect tile objects.

For each tile, it disables its sprite renderer to ensure no tiles are highlighted initially.
If the raycast hits a tile and a plant is currently selected:

        It gets the sprite renderer of the hit tile.
        Sets the sprite renderer to display the sprite of the selected plant and enables it.
        If the left mouse button is clicked and the hit tile does not already have a plant:

            It creates an instance of the selected plant at the position of the hit tile.
            Marks the tile as having a plant by setting the hasPlant property to true.
            Clears the selected plant and its sprite to indicate that the plant has been placed.

```

Remember we will come back to visit the gamemanager script a lot, but for now this will do. 

### One Last Thing

We need to go back to the PlantSlot script and:
- Add a new variable called private Gamemanager gms.
- Then, we will need a new function called BuyPlant() that will use the GameManager we just made to actually by the plant.
- We will need to pass in the plantObject and the plantSprite as arguments. 

<span style={{ fontSize: '30px' }}>**WOO HOO! Once you are able to plant the peashooter in the grids, you are done!**</span>