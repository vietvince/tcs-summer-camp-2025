---
title: "Lesson 4: Sun and Sunflowers"
sidebar_position: 3
toc_min_heading_level: 2
toc_max_heading_level: 3
---

# Lesson 4: Sun and Sunflowers


## Objective üßêüóø

We are gonna make the whole lawn shine bright with all the suns both from the sky and sunflowers! 

<span style={{ fontSize: '30px' }}>**BEFORE WE START**</span>

Lets make a plant script that we are going to give to the peashooter and the incoming sunflower object.

Here is your favorite part, the pseudocode:

``` csharp
public class Plant : MonoBehaviour

Declare variables:
    - health: an integer to store the health of the plant
    - tile: a Transform indicating the tile where the plant is placed

Start method:
    - Set the layer of the gameObject to 9 (commonly used for a specific interaction layer in Unity)
```

Thats it for now, we are going to be adding a hit function to the plant script in Session 5 so the zombies can eat them.

Now go back to Unity and give each plant a hp number. 

## Sun Drops and Sunflowers üåûüåª

### Create Sun Object

The sun will be another object in our game with a sprite renderer with a sprite image of your choice and a box collider 2D as its components, oh and of course the sun script. 

``` csharp
public class sunScript : MonoBehaviour

  Declare variables:
     - dropDownPosition: a float indicating the y-coordinate to which the sun should drop
     - speed: a float set to 1.4f to control the movement speed of the sun
     - targetPosition: a Vector3 to store the target position where the sun should stop
     - hasReachedTarget: a boolean to track whether the sun has reached its target position

   Start method:
     - Set targetPosition based on the current x and z positions of the sun but use dropDownPosition for the y-coordinate
     - Destroy the gameObject after a random time between 9 and 15 seconds

   Update method:
     - If the sun has not yet reached the target position:
         - Move the sun towards the target position at a rate of 'speed * Time.deltaTime'
         - Check if the distance between the current position and target position is less than 0.01
             - If true, set 'hasReachedTarget' to true indicating the sun has stopped moving
```

### Create SunSpawner Object

Now instead of a zombie spawner, we will make a sunspawner object, you can put it above the lawn in our scene, it will only have the default transform component and the upcoming Sun Spawner script component. 

### Sun Drops (Sun Spawner)

Remember how we made random zombie spawns from our first session? We will do almost the same thing here:

- We are gonna make the sun drop randomly in an area in a random position and a random time frame between drops.

Here is the pseudocode:

``` csharp
public class SunSpawner : MonoBehaviour

Declare variables:

    sunObject: a GameObject reference for the sun object to be spawned

Start method:

    Call the SpawnSun method to initiate sun spawning

SpawnSun method:

    Instantiate a new sunObject at a random x-coordinate between -4.71 and 6.9, y-coordinate fixed at 6, and z-coordinate fixed at 0 with no rotation (Quaternion.identity)
    Set the dropDownPosition of the instantiated sun to a random y-coordinate between 2 and -3
    Schedule the SpawnSun method to be called again after a random delay between 3 and 9 seconds
```

Now we should have suns dropping from the skies, however we are not quite done yet. 

### Edit the Game Manager

We are gonna edit the GameManager script so it will give us sun when we pick them up.

- Add a a new variable called sunHit and an if statement in our existing Update function. 

Here is the pseudocode instructions:

``` csharp
Define variables:

sunHit: Store the result of a raycast starting from the mouse position, directed towards an infinite distance, only intersecting with objects on the sunMask layer

Check if the raycast hit a collider:

If there is a collider detected by the raycast
Check if the left mouse button (button 0) is pressed

If true:
Increase a suns counter by 25 (assumed to be a resource or score variable)

Destroy the GameObject that the raycast hit
```

### Sunflower

Now we are ready to make our sunflower! First duplicate the peashooter object and change the sprite image to a sunflower. We are going to remove the bullet origin and change the shoot script to a sunflower script. 
The original peashooter stays the same. Don't forget to add a box collider 2D to this sunflower! 

Inside the sunflower script, we are going to do this :

``` csharp
public class sunFlower : MonoBehaviour

    Declare variables:

    sunObject: a GameObject reference for the sun object to be spawned
    cooldown: a float representing the time between spawns

    Start method:

    Schedule the SpawnSun method to be called repeatedly starting after 'cooldown' seconds and repeating every 'cooldown' seconds

    SpawnSun method:

    Instantiate a new sunObject at the current position of the SunFlower with no rotation (Quaternion.identity)
    Set the dropDownPosition of the instantiated sun to be half a unit below the current y-coordinate of the SunFlower
```

Now you should be able to plant the sunflower and watch it produce more and more sun! 

<span style={{ fontSize: '30px' }}>**Moving on, make sure the sunflower and the peashooter both function correctly, and then we are gonna finish off by making the zombies able to attack our plants once they get in range.**</span>